{% extends "base_account.html" %}
{% load static %}
{% block page_title %}تغییر رمز عبور | {{block.super}}{% endblock page_title %}
{% block base_content %}
{% if token_fail %}
<p class="text-gray-800 dark:text-gray-100 font-DanaMedium text-lg">
    لینک نامعتبر
</p>
<p class='mt-3 block text-sm/8 font-DanaMedium text-gray-500 dark:text-gray-300'>
    این لینک فعال‌سازی منقضی شده یا نامعتبر است. می‌توانید درخواست ارسال یک لینک جدید را بدهید.
</p>
        
<div class="mt-4">
    <a href="{% url 'account_reset_password' %}" class="submit-btn">ارسال دوباره لینک</a>
</div>

<p class="mt-5 text-right text-sm/6 text-gray-500 dark:text-gray-300">
    <a href="{% url 'account_login' %}" class="text-blue-400 hover:underline">
        بازگشت به صفحه ورود
    </a>
</p>
{% else %}
<p class="text-gray-800 dark:text-gray-100 font-DanaMedium text-lg">
    تغییر رمز عبور 
</p>
<div class="relative mt-3" data-toggle="password">
    {{ form.password1 }}
    <label for="{{form.password1.id_for_label}}"
        class="absolute top-3 right-3 z-10 cursor-text text-gray-400 transition-all duration-200
                peer-focus:-top-2 peer-focus:right-2 peer-focus:rounded-md peer-focus:bg-white peer-focus:px-1 peer-focus:text-xs peer-focus:font-medium peer-focus:text-blue-500 dark:peer-focus:bg-gray-800
                peer-[:not(:placeholder-shown)]:-top-2 peer-[:not(:placeholder-shown)]:right-2 peer-[:not(:placeholder-shown)]:rounded-md peer-[:not(:placeholder-shown)]:bg-white peer-[:not(:placeholder-shown)]:px-1 peer-[:not(:placeholder-shown)]:text-xs peer-[:not(:placeholder-shown)]:font-medium peer-[:not(:placeholder-shown)]:text-gray-600 dark:peer-[:not(:placeholder-shown)]:text-gray-300 dark:peer-[:not(:placeholder-shown)]:bg-gray-800">
    رمز عبور جدید
    </label>
    <button type="button" class="absolute inset-y-0 left-3 z-10 flex items-center toggle-password">
        <svg class="size-5 text-gray-500">
            <use href="#eye"></use>
        </svg>
    </button>
</div>
    {% for error in form.password1.errors %}
    <p class="mt-2 text-sm text-red-600">{{ error }}</p>
    {% endfor %}

    
    <ul class="w-full mt-4 flex items-center justify-center gap-x-2">
        <li id="bar1" class="w-1/3 bg-gray-300 rounded h-1 transition-colors"></li>
        <li id="bar2" class="w-1/3 bg-gray-300 rounded h-1 transition-colors"></li>
        <li id="bar3" class="w-1/3 bg-gray-300 rounded h-1 transition-colors"></li>
    </ul>
    {% comment %} TODO: this rules should apply in form too {% endcomment %}
<ul class="mt-4 space-y-2 text-sm pr-1">
    <li id="lengthCheck" class="flex items-center text-gray-400 transition-colors">
        <span class='ml-2 flex h-4 w-4 items-center justify-center'>
            <svg class="w-full h-full text-current"><use href="#circle-dot"></use></svg>
        </span>
        <span>حداقل ۸ حرف</span>
    </li>
    <li id="numberCheck" class="flex items-center text-gray-400 transition-colors">
        <span class="ml-2 flex h-4 w-4 items-center justify-center">
             <svg class="w-full h-full text-current"><use href="#circle-dot"></use></svg>
        </span>
        <span>شامل عدد</span>
    </li>
    <li id="uppercaseCheck" class="flex items-center text-gray-400 transition-colors">
        <span class="ml-2 flex h-4 w-4 items-center justify-center">
             <svg class="w-full h-full text-current"><use href="#circle-dot"></use></svg>
        </span>
        <span>شامل یک حرف بزرگ</span>
    </li>
</ul>

<div class="relative mt-3" data-toggle="password">
{{ form.password2 }}
<label for="{{form.password2.id_for_label}}"
    class="absolute top-3 right-3 z-10 cursor-text text-gray-400 transition-all duration-200
            peer-focus:-top-2 peer-focus:right-2 peer-focus:rounded-md peer-focus:bg-white peer-focus:px-1 peer-focus:text-xs peer-focus:font-medium peer-focus:text-blue-500 dark:peer-focus:bg-gray-800
            peer-[:not(:placeholder-shown)]:-top-2 peer-[:not(:placeholder-shown)]:right-2 peer-[:not(:placeholder-shown)]:rounded-md peer-[:not(:placeholder-shown)]:bg-white peer-[:not(:placeholder-shown)]:px-1 peer-[:not(:placeholder-shown)]:text-xs peer-[:not(:placeholder-shown)]:font-medium peer-[:not(:placeholder-shown)]:text-gray-600 dark:peer-[:not(:placeholder-shown)]:text-gray-300 dark:peer-[:not(:placeholder-shown)]:bg-gray-800">
تکرار رمز عبور
</label>
<button type="button" class="absolute inset-y-0 left-3 z-10 flex items-center toggle-password">
    <svg class="size-5 text-gray-500">
        <use href="#eye"></use>
    </svg>
</button>
</div>
</div>
{% for error in form.passord2.errors %}
<p class="mt-2 text-sm text-red-600">{{ error }}</p>
{% endfor %}

<div class="mt-6">
    <button class='submit-btn' type="submit">تغییر رمز عبور</button>
</div>
{% endif %}
{% endblock base_content %}

